<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StarChat Master Edition</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.swing2app.co.kr/public/js/swing_app_interface.js"></script>

    <style>
        :root { --main: #ffca28; --bg: #121212; --nav: #1e1e1e; --edge: #00f2fe; --danger: #ff5252; }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }
        #app { display: flex; flex-direction: column; height: 100vh; max-width: 500px; margin: 0 auto; position: relative; }

        /* âœ¨ ì‚¼ì„± ì—£ì§€ ë¼ì´íŒ… íš¨ê³¼ */
        .edge-glow { border: 3px solid var(--edge) !important; box-shadow: inset 0 0 25px var(--edge) !important; }
        .edge-alert { border: 3px solid var(--danger) !important; box-shadow: inset 0 0 25px var(--danger) !important; }

        /* ìƒë‹¨ ë°” (ì¹´í†¡ ìŠ¤íƒ€ì¼) */
        .header { padding: 15px; background: var(--nav); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; }
        .header-icons { display: flex; gap: 15px; }

        /* ì»¨í…ì¸  êµ¬ì—­ */
        .content { flex: 1; display: none; overflow-y: auto; padding-bottom: 120px; }
        .content.active { display: block; }

        /* 1. ë‚´ í”„ë¡œí•„ íƒ­ */
        .profile-section { padding: 20px; text-align: center; border-bottom: 1px solid #333; }
        .profile-img { width: 80px; height: 80px; background: #444; border-radius: 30px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; border: 2px solid var(--main); }
        .status-msg { color: #aaa; font-size: 0.9rem; margin-top: 5px; }

        /* 2. ì±„íŒ… íƒ­ */
        #chat-box { padding: 15px; display: flex; flex-direction: column; gap: 10px; height: 100%; }
        .msg { padding: 8px 12px; border-radius: 15px; max-width: 70%; font-size: 0.95rem; line-height: 1.4; }
        .msg.me { align-self: flex-end; background: var(--main); color: black; }
        .msg.other { align-self: flex-start; background: #333; color: white; }

        /* 3. ê²Œì„ ì„¼í„° íƒ­ */
        .game-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 15px; }
        .game-card { background: #2d2d2d; padding: 25px 10px; border-radius: 15px; text-align: center; border: 1px solid #444; position: relative; }
        .crown { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); font-size: 1.2rem; }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav { position: absolute; bottom: 0; width: 100%; display: flex; background: var(--nav); height: 65px; border-top: 1px solid #333; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.75rem; color: #888; cursor: pointer; }
        .nav-item.active { color: var(--main); }

        /* ì…ë ¥ë°” */
        .input-bar { position: absolute; bottom: 65px; width: 100%; display: flex; padding: 10px; background: #1e1e1e; box-sizing: border-box; }
        input { flex: 1; border: none; border-radius: 20px; padding: 10px 15px; background: #333; color: white; outline: none; }
    </style>
</head>
<body id="main-body">

<div id="app">
    <div class="header">
        <span id="header-title" style="font-weight:bold; font-size:1.1rem;">ì±„íŒ…</span>
        <div class="header-icons">
            <span onclick="startCall('voice')" style="cursor:pointer;">ğŸ“</span>
            <span onclick="startCall('video')" style="cursor:pointer;">ğŸ“¹</span>
            <span onclick="initPush()" style="cursor:pointer;">ğŸ””</span>
            <span onclick="blockDone()" style="color:var(--danger); cursor:pointer;">ğŸš«</span>
        </div>
    </div>

    <div id="tab-profile" class="content">
        <div class="profile-section">
            <div class="profile-img">ğŸ‘‘</div>
            <div style="font-size:1.2rem; font-weight:bold;">ìŠˆí¼ë§ˆìŠ¤í„°</div>
            <div class="status-msg">"ìš°ë…¸ +2, +4 ë°˜ì‚¬ ëŒ€í™˜ì˜"</div>
        </div>
        <div style="padding:15px;">
            <div style="color:#888; font-size:0.8rem; margin-bottom:10px;">ë‚´ ì—°ë½ì²˜</div>
            <div style="display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid #222;">
                <span>ğŸ‘¤ ê°€ëª…ìœ ì €_A</span> <button style="background:none; color:var(--main); border:1px solid; border-radius:5px; font-size:0.7rem;">ëŒ€í™”</button>
            </div>
            <div style="display:flex; justify-content:space-between; padding:10px 0;">
                <span>ğŸ¥‡ ë­í‚¹ 1ìœ„: ìŠˆí¼ë§ˆìŠ¤í„°</span> <span>2,500pt</span>
            </div>
        </div>
    </div>

    <div id="tab-chat" class="content active">
        <div id="chat-box">
            <div style="text-align:center; color:#555; font-size:0.7rem; margin-bottom:15px;">ğŸ›¡ï¸ 1ê°œì›”ê°„ì˜ ëŒ€í™”ë§Œ ë³´ê´€ë˜ë©°, ë³´ì•ˆì´ ì ìš©ë¨</div>
        </div>
        <div class="input-bar">
            <input type="text" id="chat-input" placeholder="ë©”ì‹œì§€ ì…ë ¥..." onkeypress="if(event.keyCode==13) sendMsg()">
            <button onclick="sendMsg()" style="background:var(--main); border:none; border-radius:50%; width:40px; height:40px; margin-left:5px;">â–²</button>
        </div>
    </div>

    <div id="tab-game" class="content">
        <div class="game-grid">
            <div class="game-card" onclick="playUno()"><div class="crown">ğŸ‘‘</div>ğŸƒ ìš°ë…¸ (ë°˜ì‚¬)</div>
            <div class="game-card" onclick="alert('ì²´ìŠ¤ ë³´ì´ìŠ¤ ì—°ê²°')"><div class="crown">ğŸ‘‘</div>â™Ÿï¸ ì²´ìŠ¤</div>
            <div class="game-card">âšª ì˜¤ëª©</div>
            <div class="game-card">âš« ë°”ë‘‘</div>
            <div class="game-card">ğŸ”¢ ë¹™ê³ </div>
            <div class="game-card">ğŸ¤– AI ëŒ€ì „</div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item" onclick="tab('profile')">ğŸ‘¤ í”„ë¡œí•„</div>
        <div class="nav-item active" onclick="tab('chat')">ğŸ’¬ ì±„íŒ…</div>
        <div class="nav-item" onclick="tab('game')">ğŸ® ê²Œì„</div>
    </div>
</div>

<script>
    // íƒ­ ì „í™˜
    function tab(id) {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('tab-' + id).classList.add('active');
        event.currentTarget.classList.add('active');
        
        const titles = {'profile': 'ë”ë³´ê¸°', 'chat': 'ì±„íŒ…', 'game': 'ê²Œì„ ì„¼í„°'};
        document.getElementById('header-title').innerText = titles[id];
    }

    // ìš°ë…¸ ë¦¬ë²¤ì§€ ë£° (+2, +4 ë°˜ì‚¬)
    let attackStack = 0;
    function playUno() {
        let card = prompt("+2 ë˜ëŠ” +4ë¡œ ë°˜ì‚¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
        if(card === '+2' || card === '+4') {
            attackStack += parseInt(card);
            triggerEdge('danger');
            sendPush("ìš°ë…¸ ê³µê²©!", "ìƒëŒ€ê°€ ë°˜ì‚¬í–ˆìŠµë‹ˆë‹¤! ëˆ„ì : " + attackStack);
            alert("ê³µê²© ë°˜ì‚¬ ì„±ê³µ! ëˆ„ì  " + attackStack + "ì¥!");
        } else { alert("ê²Œì„ ë³´ì´ìŠ¤ ì±„ë„ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤."); }
    }

    // ë©”ì‹œì§€ & ìŠ¤ìœ™íˆ¬ì•± í‘¸ì‹œ ë°œì†¡
    function sendMsg() {
        const input = document.getElementById('chat-input');
        if(!input.value) return;
        triggerEdge('normal');
        sendPush("StarChat", "ë§ˆìŠ¤í„°: " + input.value);
        const div = document.createElement('div');
        div.className = 'msg me';
        div.innerText = input.value;
        document.getElementById('chat-box').appendChild(div);
        input.value = '';
    }

    // ì‚¼ì„± ì—£ì§€ ë¼ì´íŒ…
    function triggerEdge(type) {
        const body = document.getElementById('main-body');
        const cls = (type === 'danger') ? 'edge-danger' : 'edge-glow';
        body.classList.add(cls);
        setTimeout(() => body.classList.remove(cls), 1500);
    }

    function sendPush(title, body) {
        if (typeof swingWebViewInterface !== "undefined") {
            swingWebViewInterface.sendPushNotification({ title, body });
        }
    }

    function initPush() {
        if (typeof swingWebViewInterface !== "undefined") {
            swingWebViewInterface.requestPushToken();
            alert("í‘¸ì‹œ ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }

    function startCall(type) {
        triggerEdge('normal');
        alert(type === 'video' ? "ì˜ìƒí†µí™” ì—°ê²°..." : "ìŒì„±ì „í™” ì—°ê²°...");
    }

    function blockDone() {
        if(confirm("ì´ ë°©ì„ ì°¨ë‹¨ ì™„ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            alert("ì°¨ë‹¨ ì™„ë£Œ!");
            document.body.innerHTML = "<h2 style='color:white; text-align:center; padding-top:50%;'>ğŸš« ì°¨ë‹¨ëœ ë°©ì…ë‹ˆë‹¤</h2>";
        }
    }
</script>
</body>
</html>
